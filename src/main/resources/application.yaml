spring:
  application:
    name: didim-log

  config:
    import: optional:file:.env[.properties]

  data:
    mongodb:
      uri: mongodb://localhost:27017/didimlog

  redis:
    host: localhost
    port: 6379

  security:
    oauth2:
      client:
        registration:
          # Google OAuth2 설정
          # 환경 변수: OAUTH_GOOGLE_ID, OAUTH_GOOGLE_SECRET
          # 설정 방법: Google Cloud Console에서 OAuth 2.0 클라이언트 ID 생성 후 환경 변수에 설정
          google:
            client-id: ${OAUTH_GOOGLE_ID}
            client-secret: ${OAUTH_GOOGLE_SECRET}
            scope:
              - profile
              - email
          # GitHub OAuth2 설정
          # 환경 변수: OAUTH_GITHUB_ID, OAUTH_GITHUB_SECRET
          # 설정 방법: GitHub Developer Settings에서 OAuth App 생성 후 환경 변수에 설정
          github:
            client-id: ${OAUTH_GITHUB_ID}
            client-secret: ${OAUTH_GITHUB_SECRET}
            scope:
              - user:email
              - read:user
          # Naver OAuth2 설정
          # 환경 변수: OAUTH_NAVER_ID, OAUTH_NAVER_SECRET
          # 설정 방법: Naver Developers에서 애플리케이션 등록 후 환경 변수에 설정
          naver:
            client-id: ${OAUTH_NAVER_ID}
            client-secret: ${OAUTH_NAVER_SECRET}
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            client-name: Naver
            scope:
              - name
              - email
              - profile_image
        provider:
          # Naver Provider 설정 (별도 설정 필요)
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response # Naver는 response 속성 사용

  # SMTP 이메일 발송 설정
  # 로컬 테스트 시 IntelliJ 환경 변수 설정 방법:
  # Run/Debug Configurations -> Environment variables에 MAIL_PASSWORD=앱비밀번호 추가
  # 또는 .env 파일에 MAIL_PASSWORD=앱비밀번호 추가
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME:didimlognoreply@gmail.com}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

logging:
  level:
    root: INFO

server:
  forward-headers-strategy: framework

app:
  server:
    url: ${SERVER_URL:http://localhost:8080}
  jwt:
    secret: ${JWT_SECRET}
    # Access Token: 30분 (유휴 상태 시 보안을 위해 짧게 유지)
    access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION:1800000} # 30분 (밀리초)
    # Refresh Token: 7일 (사용자 편의를 위해 로그인 유지) - 향후 구현 예정
    refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION:604800000} # 7일 (밀리초)
    # 하위 호환성을 위해 expiration도 유지 (access-token-expiration과 동일)
    expiration: ${JWT_EXPIRATION:1800000} # 30분 (밀리초) - access-token-expiration과 동일
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173,https://*.firebaseapp.com,https://*.web.app,https://didim-log-fe.web.app}
  oauth:
    redirect-uri: ${OAUTH_REDIRECT_URI:http://localhost:5173/oauth/callback}
  admin:
    secret-key: ${ADMIN_SECRET_KEY}

ai:
  enabled: ${AI_ENABLED:true}
  gemini:
    # 운영/로컬 환경변수로 주입 (하드코딩 금지)
    api-key: ${GEMINI_API_KEY:}
    url: ${GEMINI_API_URL:https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent}

